<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mocilas&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Wang Wenxue">
<meta property="og:type" content="website">
<meta property="og:title" content="Mocilas's Blog">
<meta property="og:url" content="http://mocilas.github.io/index.html">
<meta property="og:site_name" content="Mocilas's Blog">
<meta property="og:description" content="Wang Wenxue">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mocilas's Blog">
<meta name="twitter:description" content="Wang Wenxue">
  
    <link rel="alternative" href="/atom.xml" title="Mocilas&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="https://avatars1.githubusercontent.com/u/10126518?v=3&u=6ef0a81d460afeb704cd0af50016642ffb01ec7f&s=140">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars1.githubusercontent.com/u/10126518?v=3&amp;u=6ef0a81d460afeb704cd0af50016642ffb01ec7f&amp;s=140" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Mocilas</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Stay Hungry! Stay Foolish!</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Mocilas" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/mocilas/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
					        
								<a class="google" target="_blank" href="https://plus.google.com/u/0/107368566924742778760/posts" title="google">google</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/NSArray/" style="font-size: 10px;">NSArray</a> <a href="/tags/NSString/" style="font-size: 10px;">NSString</a> <a href="/tags/UIImageView/" style="font-size: 10px;">UIImageView</a> <a href="/tags/UISegmentedControl/" style="font-size: 10px;">UISegmentedControl</a> <a href="/tags/UIView/" style="font-size: 10px;">UIView</a> <a href="/tags/crawler/" style="font-size: 10px;">crawler</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 13.33px;">hexo</a> <a href="/tags/ios/" style="font-size: 20px;">ios</a> <a href="/tags/python/" style="font-size: 16.67px;">python</a> <a href="/tags/乌合之众/" style="font-size: 10px;">乌合之众</a> <a href="/tags/吐槽/" style="font-size: 10px;">吐槽</a> <a href="/tags/嫌疑人X的献身/" style="font-size: 10px;">嫌疑人X的献身</a> <a href="/tags/幸福爱/" style="font-size: 10px;">幸福爱</a> <a href="/tags/心理学/" style="font-size: 13.33px;">心理学</a> <a href="/tags/推理小说/" style="font-size: 10px;">推理小说</a> <a href="/tags/摘抄/" style="font-size: 10px;">摘抄</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/正能量/" style="font-size: 10px;">正能量</a> <a href="/tags/秘密/" style="font-size: 10px;">秘密</a> <a href="/tags/笔记/" style="font-size: 18.33px;">笔记</a> <a href="/tags/类/" style="font-size: 10px;">类</a> <a href="/tags/读书/" style="font-size: 15px;">读书</a> <a href="/tags/读书笔记/" style="font-size: 10px;">读书笔记</a> <a href="/tags/随笔/" style="font-size: 11.67px;">随笔</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">As long as you look at me, I will be pure forever.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Mocilas</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://avatars1.githubusercontent.com/u/10126518?v=3&amp;u=6ef0a81d460afeb704cd0af50016642ffb01ec7f&amp;s=140" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Mocilas</h1>
			</hgroup>
			
			<p class="header-subtitle">Stay Hungry! Stay Foolish!</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Mocilas" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/mocilas/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo">weibo</a>
			        
						<a class="google" target="_blank" href="https://plus.google.com/u/0/107368566924742778760/posts" title="google">google</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-tableviewCell视图tip" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/28/tableviewCell视图tip/" class="article-date">
  	<time datetime="2016-07-28T09:21:34.000Z" itemprop="datePublished">2016-07-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/28/tableviewCell视图tip/">tableviewCell视图tip</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="tableViewCell视图笔记">tableViewCell视图笔记</h2><p>自定义的tableViewCell的视图，不要把子视图直接加在自定义cell视图的self上，而是应该加在self.contentView上。因为只有这样，在编辑模式下，视图才会跟着删除按钮一起动画！！！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-dyld-Library-not-loaded-rpath-libswiftCore-dylib-Image-not-found" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/30/dyld-Library-not-loaded-rpath-libswiftCore-dylib-Image-not-found/" class="article-date">
  	<time datetime="2016-05-30T14:05:21.000Z" itemprop="datePublished">2016-05-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/30/dyld-Library-not-loaded-rpath-libswiftCore-dylib-Image-not-found/">dyld: Library not loaded: @rpath/libswiftCore.dylib / Image not found</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="dyld:_Library_not_loaded:_@rpath/libswiftCore-dylib_/_Image_not_found">dyld: Library not loaded: @rpath/libswiftCore.dylib / Image not found</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">dyld</span>: Library not <span class="attribute">loaded</span>: <span class="variable">@rpath</span>/libswiftCore.dylib</span><br><span class="line">Referenced <span class="attribute">from</span>: /private/var/mobile/Containers/Bundle/Application/<span class="number">10</span>DB2FE8-EF09-<span class="number">4857</span>-B4AC-<span class="number">0</span>DB2E4419D6F/App-Name.app/App-Name           </span><br><span class="line"><span class="attribute">Reason</span>: image not found        </span><br><span class="line">(lldb)</span><br></pre></td></tr></table></figure>
<p>解决办法：</p>
<p>None of the other solutions helped me, but everything was fixed by deleting Xcode’s Derived Data directory.</p>
<p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/problem-QQ20160530-0.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-ios开发笔记-8" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/07/ios开发笔记-8/" class="article-date">
  	<time datetime="2016-04-07T07:39:37.000Z" itemprop="datePublished">2016-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/07/ios开发笔记-8/">ios开发笔记-8</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ios开发笔记-8">ios开发笔记-8</h2><h3 id="评价、显示半颗星">评价、显示半颗星</h3><p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/ios-QQ20160407-2.png" alt=""></p>
<p><a href="https://github.com/glenyi/TPFloatRatingView" target="_blank" rel="external">使用的库:TPFloatRatingView</a></p>
<p>只要设置一下参数就好了：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span><span class="variable">.starView</span> = [[TPFloatRatingView alloc] init];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(kLeft30, <span class="number">50</span>, <span class="number">100</span>, <span class="number">15</span>);</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, starsWidth, starsHeight);</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.emptySelectedImage</span> = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"star_grey"</span>];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.fullSelectedImage</span> = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"star_light"</span>];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.rating</span> = <span class="keyword">self</span><span class="variable">.starNum</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.maxRating</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.minRating</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.editable</span> = <span class="literal">NO</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.halfRatings</span> = <span class="literal">YES</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.starView</span><span class="variable">.floatRatings</span> = <span class="literal">YES</span>;</span><br><span class="line">[<span class="keyword">self</span><span class="variable">.starview</span> addSubview:<span class="keyword">self</span><span class="variable">.starView</span>];</span><br></pre></td></tr></table></figure>
<p>如果需要编辑星星的话，就要使用TPFloatRatingViewDelegate：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)floatRatingView:(TPFloatRatingView *)ratingView ratingDidChange:(<span class="built_in">CGFloat</span>)rating</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.starnumber</span> = rating;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)floatRatingView:(TPFloatRatingView *)ratingView continuousRating:(<span class="built_in">CGFloat</span>)rating</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.starnumber</span> = rating*<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (rating==<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"打个分吧~"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (rating==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"很差!"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (rating==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"较差!"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (rating==<span class="number">3</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"一般!"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (rating==<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"挺好!"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.titleLabel</span><span class="variable">.text</span> = <span class="string">@"很棒!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="点击显示大图+长按保存">点击显示大图+长按保存</h3><p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/ios-QQ20160407-0.png" alt="">  <img src="http://7xp8qf.com1.z0.glb.clouddn.com/ios-QQ20160407-1.png" alt=""></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#import</span> &lt;<span class="tag">JTSImageInfo</span><span class="class">.h</span>&gt;</span><br><span class="line"><span class="id">#import</span> &lt;<span class="tag">JTSImageViewController</span><span class="class">.h</span>&gt;</span><br><span class="line"><span class="id">#import</span> &lt;<span class="tag">JTSSimpleImageDownloader</span><span class="class">.h</span>&gt;</span><br></pre></td></tr></table></figure>
<p>设立点击图片的响应：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create image info</span></span><br><span class="line"><span class="type">JTSImageInfo</span> *imageInfo = [[<span class="type">JTSImageInfo</span> alloc] <span class="keyword">init</span>];</span><br><span class="line">imageInfo.image = image;</span><br><span class="line">imageInfo.referenceRect = <span class="keyword">self</span>.view.window.frame;</span><br><span class="line">imageInfo.referenceView = <span class="keyword">self</span>.view.window.superview;</span><br><span class="line"><span class="comment">// Setup view controller</span></span><br><span class="line"><span class="type">JTSImageViewController</span> *imageViewer = [[<span class="type">JTSImageViewController</span> alloc]</span><br><span class="line">                                       initWithImageInfo:imageInfo</span><br><span class="line">                                       mode:<span class="type">JTSImageViewControllerMode_Image</span></span><br><span class="line">                                       backgroundStyle:<span class="type">JTSImageViewControllerBackgroundOption_Blurred</span>];</span><br><span class="line"><span class="comment">// Present the view controller.</span></span><br><span class="line">imageViewer.interactionsDelegate  = <span class="keyword">self</span>;</span><br><span class="line">[imageViewer showFromViewController:<span class="keyword">self</span> transition:<span class="type">JTSImageViewControllerTransition_FromOffscreen</span>];</span><br></pre></td></tr></table></figure>
<p>使用JTSImageViewControllerInteractionsDelegate:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)imageViewerAllowCopyToPasteboard:(JTSImageViewController *)imageViewer &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="built_in">BOOL</span>)imageViewerShouldTemporarilyIgnoreTouches:(JTSImageViewController *)imageViewer &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)imageViewerDidLongPress:(JTSImageViewController *)imageViewer atRect:(<span class="built_in">CGRect</span>)rect &#123;</span><br><span class="line">    _selectedImage = imageViewer<span class="variable">.image</span>;</span><br><span class="line">    ZZActionSheet *actionSheet =</span><br><span class="line">    [[ZZActionSheet alloc] initWithTitle:<span class="literal">nil</span></span><br><span class="line">                                delegate:<span class="keyword">self</span></span><br><span class="line">                       cancelButtonTitle:<span class="string">@"取消"</span></span><br><span class="line">                  destructiveButtonTitle:<span class="string">@"保存到手机"</span></span><br><span class="line">                       otherButtonTitles:<span class="literal">nil</span>];</span><br><span class="line">    actionSheet<span class="variable">.tag</span> = kImageActionSheetTag;</span><br><span class="line">    [actionSheet showInView:imageViewer<span class="variable">.view</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="preprocessor">#pragma mark SavePhotoToPhone</span></span><br><span class="line">- (<span class="keyword">void</span>)image: (<span class="built_in">UIImage</span> *) image didFinishSavingWithError: (<span class="built_in">NSError</span> *) error contextInfo: (<span class="keyword">void</span> *) contextInfo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        [SVProgressHUD showErrorWithStatus:<span class="string">@"保存失败"</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        [SVProgressHUD showSuccessWithStatus:<span class="string">@"保存成功"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-《幻夜》摘抄" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/07/《幻夜》摘抄/" class="article-date">
  	<time datetime="2016-04-07T07:13:13.000Z" itemprop="datePublished">2016-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/07/《幻夜》摘抄/">《幻夜》摘抄</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="《幻夜》摘抄">《幻夜》摘抄</h2><p>人呀，只要一着急，肯定会暴露缺点。</p>
<p>道路是否正确，要看以后的行动。不论起初的选择多么正确，如果之后的做法不对，那也不行。</p>
<p>“我们别无选择，只能在黑夜中的道路上前行。即便四周如白昼一样明亮，也只是不真实的白昼。对此我们早已认命。”</p>
<p>“喂，雅也，你好好看看这世上的夫妻。过上两年，丈夫就开始厌倦妻子的身体，再过五年，连看都不看一眼，手上有点钱的男人就会在外面找女人。在那之前忍耐一下就行了。从根本上说，做爱是什么？只不过是生殖行为，小狗小猫都在做，根本用不着在意。你也可以和别的女人随便做爱。关键是彼此的心，不是吗？”</p>
<p>“有两层意义。第一，这种家庭在世界上根本就不存在。即便看似幸福美满，任何夫妇都有见不得人的地方，只不过是戴上面具隐藏了起来。第二，即便存在这样的美满家庭，我们根本没资格去追求。你不会忘记我们曾经做过的事情吧？”</p>
<p>“如果能用钱解决，那就简单了。”美冬将胳膊放在桌子上托着腮，望着雅也，“我倒是想出了一个主意。” “什么？” 美冬垂下眼睑，微皱起眉头。“也不是什么好主意，可应该有效果，但做起来很难，而且……不好再求你了。” “别管那些，你先说来听听。” “嗯。”美冬端正了姿势，“只是一个想法，并不想让你绝对按这个做。如果你不愿意，就实话实说。”</p>
<p>“想利用别人，有各种各样的方法，用钱是最低级的手段。绝不能信那些可以用钱收买的人。”</p>
<p>不想被有子厌恶——意识到这种想法时，他动摇了。这种感情才是实实在在的，才是对喜欢的人持有的感情。那，对美冬怎样呢？害怕被轻蔑，想成为对她有用的男人，希望满足她的期望，做一个配得上她的男人……总是有这样的想法，但从没有过不想被厌恶这种质朴的心情。</p>
<p>美冬的话过于肯定，但她认定的事情往往准确无误，这正是这个女人令人恐惧的地方。</p>
<p>“我们别无选择，只能在黑夜中的道路上前行。即便四周如白昼一样明亮，也只是不真实的白昼。对此我们早已认命。”</p>
<p>当发现和她在一起的日子都是幻影时，雅也决定从美冬面前消失。再也无法和她共同生活下去了，但他又不能将一切变成白纸。他内心受到的伤害极深，经历的过去太肮脏，根本无法变成白纸。</p>
<p>加藤再次体会到时间确实在流逝，人的内心也在变化，而且，有些必须变化，否则人将无法生存下去。</p>
<p>任何人都有想抹掉的过去。估计大家心中也都隐藏着一个梦想——完全变成别人，体会和以前完全不同的人生。</p>
<p>虽说碰上了好运气，但如果没有卓越的判断力和洞察力，以及最为重要的毅力，肯定无法做到。雅也无法推测她是如何获得这样的能力的，但有一点可以确定，她的前半生肯定非同一般。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/摘抄/">摘抄</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书笔记/">读书笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-缓存cache" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/07/缓存cache/" class="article-date">
  	<time datetime="2016-04-07T07:04:31.000Z" itemprop="datePublished">2016-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/07/缓存cache/">缓存cache</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="缓存cahche">缓存cahche</h2><h3 id="存入">存入</h3><p>在网络请求函数中写：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSData *data = <span class="comment">[NSKeyedArchiver archivedDataWithRootObject:dataarray]</span>;</span><br><span class="line"><span class="comment">[<span class="comment">[NSUserDefaults standardUserDefaults]</span> removeObjectForKey:@“这个地方可以吧API作为key”]</span>;</span><br><span class="line"><span class="comment">[<span class="comment">[NSUserDefaults standardUserDefaults]</span> setObject:data forKey:@“这个地方可以吧API作为key”]</span>;</span><br></pre></td></tr></table></figure>
<h3 id="取出">取出</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSData</span> *data = [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] objectForKey:API_TOPIC_RCMD_GETRCMD];</span><br><span class="line"><span class="built_in">NSArray</span> *arraycache = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:data];</span><br><span class="line"><span class="keyword">if</span> (arraycache<span class="variable">.count</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.recommendArray</span> = arraycache;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Assigning-to-id-Delegate-from-incompatible-type-ViewController-const-strong" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/06/Assigning-to-id-Delegate-from-incompatible-type-ViewController-const-strong/" class="article-date">
  	<time datetime="2016-04-06T09:14:52.000Z" itemprop="datePublished">2016-04-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/06/Assigning-to-id-Delegate-from-incompatible-type-ViewController-const-strong/">Assigning to &#39;id&lt;Delegate&gt;&#39; from incompatible type &#39;ViewController *const_strong&#39;</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Assigning_to_‘id‘_from_incompatible_type_‘ViewController_*const_strong’">Assigning to ‘id<delegate>‘ from incompatible type ‘ViewController *const_strong’</delegate></h2><p>在stackoverflow上看到的解决方法：</p>
<p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/problem-QQ20160406-0.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-NSString-format-保留小数点-float-double" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/01/NSString-format-保留小数点-float-double/" class="article-date">
  	<time datetime="2016-04-01T02:50:40.000Z" itemprop="datePublished">2016-04-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/01/NSString-format-保留小数点-float-double/">NSString format 保留小数点 float double</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="NSString_format_保留小数点_float_double">NSString format 保留小数点 float double</h2><pre><code>self.scoreLabel.<span class="keyword">text</span> = [NSString stringWithFormat:<span class="variable">@"</span><span class="variable">%.</span><span class="number">1</span>f分<span class="string">", [model.score doubleValue]];</span>
</code></pre><p>%.1f  表示小数点一位，<br>%.2f 表示小数点2位，依次类推</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-clang-error-Linker-command-failed-with-exit-code-1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/29/clang-error-Linker-command-failed-with-exit-code-1/" class="article-date">
  	<time datetime="2016-03-29T06:54:52.000Z" itemprop="datePublished">2016-03-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/29/clang-error-Linker-command-failed-with-exit-code-1/">clang error: Linker command failed with exit code 1</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="clang_error:_Linker_command_failed_with_exit_code_1">clang error: Linker command failed with exit code 1</h2><p>项目中遇到了这样的问题，google了一下，给出了这样几种解决方案：</p>
<h4 id="第一种，只说了问题：m文件被重复编译。没有说解决方案。">第一种，只说了问题：m文件被重复编译。没有说解决方案。</h4><h4 id="第二种：给出了这样的解决方案：">第二种：给出了这样的解决方案：</h4><p>Just go to the project settings (click on the File Structure icon and then the app name, and then the Tests target), click Build Settings and then scroll down until you see Test Host (or type ‘host’ in the search box).</p>
<p>Then clear the contents of both the Debug and Release hosts, circled below. The app should then compile without any issues.</p>
<p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/problemScreen-Shot-2015-06-16-at-16.44.48.png" alt=""></p>
<h4 id="第三种：这个解决方案和上一个类似：">第三种：这个解决方案和上一个类似：</h4><p>In some case error log window displaying .xctest error, to fix it</p>
<p>-&gt; Select your project</p>
<p>-&gt; Beside this(just before General tab) select your projectTest file from dropdown</p>
<p>-&gt; There is one option (like ProjNameTests)</p>
<p>-&gt; In Host Application, select your project from dropdown only if it show custom</p>
<p><img src="http://7xp8qf.com1.z0.glb.clouddn.com/problemL9lm5.png" alt=""></p>
<h4 id="第四种：还有人直接问了apple的staff，人家是这么回答的：">第四种：还有人直接问了apple的staff，人家是这么回答的：</h4><p>In timerRunningViewController.m, you’re importing the the ViewController implementation (ViewController.m) rather than its header (ViewController.h).</p>
<h4 id="然而最后呢，用上述方法都没有解决。">然而最后呢，用上述方法都没有解决。</h4><p>后来我发现我的问题是全局变量在不同的文件中被重复定义。换个名字就好啦。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-地图与标记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/23/地图与标记/" class="article-date">
  	<time datetime="2016-03-23T03:02:26.000Z" itemprop="datePublished">2016-03-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/23/地图与标记/">地图与标记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="显示地图">显示地图</h2><h3 id="在地图的头文件中#import_&lt;MapKit/MapKit-h&gt;">在地图的头文件中<code>#import &lt;MapKit/MapKit.h&gt;</code></h3><h3 id="在地图的头文件中还要引入协议&lt;MKMapViewDelegate&gt;">在地图的头文件中还要引入协议<code>&lt;MKMapViewDelegate&gt;</code></h3><p>代码如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;MapKit/MapKit.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"MapLocation.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AnnotationViewController</span> : <span class="title">UIViewController</span> &lt;<span class="title">MKMapViewDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) CLLocationDegrees longitude; <span class="comment">// 经度</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) CLLocationDegrees latitude; <span class="comment">// 纬度</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *institutionName; <span class="comment">// 名称</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *locationName; <span class="comment">// 地址名称</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="在地图的controller中声明MKMapView">在地图的controller中声明MKMapView</h3><p>代码如下：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@interface</span> AnnotationViewController ()</span><br><span class="line"><span class="variable">@property</span> (strong, nonatomic) MKMapView *mapView; <span class="comment">// 地图view</span></span><br><span class="line"><span class="variable">@property</span> (nonatomic) CLLocationDistance latitudinalMeters; <span class="comment">// 纬度放大倍数</span></span><br><span class="line"><span class="variable">@property</span> (nonatomic) CLLocationDistance longitudinalMeters; <span class="comment">// 经度放大倍数</span></span><br><span class="line"><span class="variable">@property</span> (nonatomic, strong) CLGeocoder *geocoder; <span class="comment">// 反编码</span></span><br><span class="line"><span class="variable">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="初始化地图view和协议">初始化地图view和协议</h3><p>代码如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initMap</span><br><span class="line">&#123;</span><br><span class="line">    _mapView = [[<span class="built_in">MKMapView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">64</span>, DF_WIDTH, DF_HEIGHT-<span class="number">64</span>)];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.view</span> addSubview:_mapView];</span><br><span class="line">    _mapView<span class="variable">.mapType</span> = <span class="built_in">MKMapTypeStandard</span>;</span><br><span class="line">    _mapView<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="自定义地图地址模型">自定义地图地址模型</h2><h3 id="location模型头文件代码如下，感觉其实除了遵守&lt;MKAnnotation&gt;协议以外其他的暂时没什么用，只用到了&lt;MKAnnotation&gt;里面的title和subtitle。">location模型头文件代码如下，感觉其实除了遵守<code>&lt;MKAnnotation&gt;</code>协议以外其他的暂时没什么用，只用到了<code>&lt;MKAnnotation&gt;</code>里面的<strong>title</strong>和<strong>subtitle</strong>。</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;MapKit/MapKit.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MapLocation</span> : <span class="title">NSObject</span>&lt;<span class="title">MKAnnotation</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>) CLLocationCoordinate2D coordinate; <span class="comment">//</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *streetAddress; <span class="comment">// 街道信息属性</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *city; <span class="comment">// 城市信息属性</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *state; <span class="comment">// 邮编</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *zip; <span class="comment">// 地理坐标</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *title; <span class="comment">// 标题</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *subtitle; <span class="comment">// 副标题</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="location的m文件代码如下：用了懒加载。因为在’mapViewController’中会赋值给这两个property，所以感觉也并没有什么用。">location的m文件代码如下：用了懒加载。因为在’mapViewController’中会赋值给这两个<strong>property</strong>，所以感觉也并没有什么用。</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@implementation</span> MapLocation</span><br><span class="line">- (NSString *)title &#123;</span><br><span class="line">    <span class="keyword">if</span>(!_title) _title = @<span class="string">"XXX"</span>;</span><br><span class="line">    <span class="keyword">return</span> _title;</span><br><span class="line">&#125;</span><br><span class="line">- (NSString *)subtitle &#123;</span><br><span class="line">    <span class="keyword">if</span>(!_subtitle)&#123;</span><br><span class="line">        NSMutableString *ret = [NSMutableString <span class="keyword">new</span>];</span><br><span class="line">        <span class="keyword">if</span>(_state)</span><br><span class="line">            [ret <span class="string">appendString:</span>_state];</span><br><span class="line">        <span class="keyword">if</span>(_city)</span><br><span class="line">            [ret <span class="string">appendString:</span>_city];</span><br><span class="line">        <span class="keyword">if</span>(_city &amp;&amp; _state)</span><br><span class="line">            [ret <span class="string">appendString:</span>@<span class="string">","</span>];</span><br><span class="line">        <span class="keyword">if</span>(_streetAddress &amp;&amp; (_city || _state || _zip))</span><br><span class="line">            [ret <span class="string">appendString:</span>@<span class="string">"·"</span>];</span><br><span class="line">        <span class="keyword">if</span>(_streetAddress)</span><br><span class="line">            [ret <span class="string">appendString:</span>_streetAddress];</span><br><span class="line">        <span class="keyword">if</span>(_zip)</span><br><span class="line">            [ret <span class="string">appendFormat:</span>@<span class="string">", %@"</span>, _zip];</span><br><span class="line">        _subtitle = ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _subtitle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="annotation">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="annocation大头针定位">annocation大头针定位</h2><h3 id="关于大头针的view">关于大头针的view</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">MKAnnotationView</span> *)mapView:(<span class="built_in">MKMapView</span> *)mapView viewForAnnotation:(<span class="keyword">id</span>&lt;<span class="built_in">MKAnnotation</span>&gt;)annotation</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">MKPinAnnotationView</span> *annotationView = (<span class="built_in">MKPinAnnotationView</span> *)[_mapView dequeueReusableAnnotationViewWithIdentifier:<span class="string">@"PIN_ANNOTATION"</span>];</span><br><span class="line">    <span class="keyword">if</span>(!annotationView)&#123;</span><br><span class="line">        annotationView = [[<span class="built_in">MKPinAnnotationView</span> alloc]initWithAnnotation:annotation reuseIdentifier:<span class="string">@"PIN_ANNOTATION"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    annotationView<span class="variable">.pinColor</span> = <span class="built_in">MKPinAnnotationColorRed</span>;</span><br><span class="line">    annotationView<span class="variable">.animatesDrop</span> = <span class="literal">YES</span>;</span><br><span class="line">    annotationView<span class="variable">.canShowCallout</span> = <span class="literal">YES</span>;</span><br><span class="line">    <span class="keyword">return</span> annotationView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="关于有经纬度编码+反编码的部分">关于有经纬度编码+反编码的部分</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">CLLocation *location = [[CLLocation alloc] initWithLatitude:<span class="keyword">self</span><span class="variable">.latitude</span> longitude:<span class="keyword">self</span><span class="variable">.longitude</span>];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.geocoder</span> = [[CLGeocoder alloc] init];</span><br><span class="line">[<span class="keyword">self</span><span class="variable">.geocoder</span> reverseGeocodeLocation:location</span><br><span class="line">                    completionHandler:^(<span class="built_in">NSArray</span> *placemarks, <span class="built_in">NSError</span> *error)</span><br><span class="line">&#123;</span><br><span class="line">     <span class="keyword">if</span> (error == <span class="literal">nil</span> &amp;&amp; [placemarks count] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">         [_mapView removeAnnotations:_mapView<span class="variable">.annotations</span>];</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;[placemarks count];i++)</span><br><span class="line">         &#123;</span><br><span class="line">             CLPlacemark *placemark = placemarks[i];</span><br><span class="line">             <span class="comment">// 调整地图位置和缩放比例</span></span><br><span class="line">             <span class="built_in">MKCoordinateRegion</span> viewRegion = <span class="built_in">MKCoordinateRegionMakeWithDistance</span>(placemark<span class="variable">.location</span><span class="variable">.coordinate</span>, <span class="keyword">self</span><span class="variable">.latitudinalMeters</span>, <span class="keyword">self</span><span class="variable">.longitudinalMeters</span>);</span><br><span class="line">             [_mapView setRegion:viewRegion animated:<span class="literal">YES</span>];</span><br><span class="line">             MapLocation *annotation = [[MapLocation alloc]init];</span><br><span class="line">             annotation<span class="variable">.title</span> = <span class="keyword">self</span><span class="variable">.XXXName</span>;</span><br><span class="line">             annotation<span class="variable">.subtitle</span> = <span class="keyword">self</span><span class="variable">.locationName</span>;</span><br><span class="line">             annotation<span class="variable">.streetAddress</span> = placemark<span class="variable">.thoroughfare</span>;</span><br><span class="line">             annotation<span class="variable">.city</span> = placemark<span class="variable">.locality</span>;</span><br><span class="line">             annotation<span class="variable">.state</span> = placemark<span class="variable">.administrativeArea</span>;</span><br><span class="line">             annotation<span class="variable">.zip</span> = placemark<span class="variable">.postalCode</span>;</span><br><span class="line">             annotation<span class="variable">.coordinate</span> = placemark<span class="variable">.location</span><span class="variable">.coordinate</span>;</span><br><span class="line">             [_mapView addAnnotation:annotation];</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span> <span class="keyword">if</span> (error == <span class="literal">nil</span> &amp;&amp; [placemarks count] == <span class="number">0</span>)&#123;</span><br><span class="line">         <span class="built_in">NSLog</span>(<span class="string">@"No results were returned."</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span> <span class="keyword">if</span> (error != <span class="literal">nil</span>)&#123;</span><br><span class="line">         <span class="built_in">NSLog</span>(<span class="string">@"An error occurred = %@"</span>, error);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS开发随笔-3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/23/iOS开发随笔-3/" class="article-date">
  	<time datetime="2016-03-23T03:01:12.000Z" itemprop="datePublished">2016-03-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/23/iOS开发随笔-3/">iOS开发随笔-3</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="协议与委托">协议与委托</h2><p>这次做项目，用到了一点点协议与委托的东西，把我学到的东西总结一下：</p>
<p>委托和协议是两个概念，协议实际上相当于C++中的纯虚类的概念，只定义并只能由其它类来实现。而委托类似于Java中的接口。</p>
<p>协议<strong>@protocol</strong>就是多个文件共同遵守，里面的方法默认必须实现<strong>@required</strong>，也可以设置可选<strong>@optional</strong>。</p>
<p>委托<strong>delegate</strong>就是A要实现一个方法，但是A没有，就委托B去实现。委托不一定非要用协议来实现。</p>
<p>在这次的项目中，用到了一点协议与委托。</p>
<ul>
<li>在view.h中声明协议</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@protocol</span> XXXDelegate &lt;NSObject&gt;</span><br><span class="line"><span class="variable">@optional</span></span><br><span class="line">- (void)XXX;</span><br><span class="line"><span class="variable">@end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在view.h的interface中也要声明：</li>
</ul>
<p><code>@property (nonatomic, assign) id &lt;XXXDelegate&gt; delegate; // 协议声明&#39;</code></p>
<ul>
<li>在view.h中像调用对象一样调用delegate：</li>
</ul>
<p><code>[self.delegate XXX];</code></p>
<ul>
<li>在实现委托的文件中，比如viewController中，引入delegate：</li>
</ul>
<p><code>@interface XXXTableViewController ()&lt;XXXDelegate&gt;</code></p>
<ul>
<li>在需要实现协议的控件上：</li>
</ul>
<p><code>headView.delegate = self;</code></p>
<ul>
<li>最后要实现协议中的方法。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ios/">ios</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Mocilas
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>